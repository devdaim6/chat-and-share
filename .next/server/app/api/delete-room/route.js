(()=>{var e={};e.id=63,e.ids=[63],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},82452:e=>{"use strict";e.exports=require("tls")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},55579:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{DELETE:()=>d});var s=r(88797),i=r(10042),a=r(58492),n=r(59540),c=r(62085),u=r(40672);async function d(e){try{await (0,c.uD)();let{roomId:t}=await e.json();return await c.WK.findOneAndDelete({roomId:t}),await (0,u.A)(t),n.NextResponse.json({message:"Room deleted successfully"})}catch(e){return console.error("Room deletion error:",e),n.NextResponse.json({error:"Failed to delete room"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/delete-room/route",pathname:"/api/delete-room",filename:"route",bundlePath:"app/api/delete-room/route"},resolvedPagePath:"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\api\\delete-room\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:g}=p;function y(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},78031:()=>{},35303:()=>{},40672:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,D:()=>a});var o=r(47278);let s=[process.env.KAFKA_BROKER_URL],i=new o.Kafka({clientId:"chat-admin",brokers:s,retry:{initialRetryTime:100,retries:8}}).admin();async function a(e){if(!e)throw Error("Room ID is required");try{await i.connect();let t=await i.listTopics(),r=`chat-room-${e}`;t.includes(r)||(await i.createTopics({topics:[{topic:r,numPartitions:1,replicationFactor:1}],timeout:5e3}),console.log(`Created topic: ${r}`))}catch(e){throw console.error("Error setting up Kafka topic:",e),e}finally{try{await i.disconnect()}catch(e){console.error("Error disconnecting admin:",e)}}}async function n(e){try{await i.connect(),await i.deleteTopics({topics:[`chat-room-${e}`]})}catch(e){throw console.error("Error deleting Kafka topic:",e),e}finally{await i.disconnect()}}},62085:(e,t,r)=>{"use strict";r.d(t,{WK:()=>u,Ee:()=>c,uD:()=>i});let o=require("mongoose");var s=r.n(o);let i=async()=>{try{0===s().connection.readyState&&(await s().connect(process.env.MONGODB_URI),console.log("Connected to MongoDB"))}catch(e){throw console.error("MongoDB connection error:",e),e}},a=new(s()).Schema({imageId:{type:String,required:!0,unique:!0},message:{type:String},imageData:{type:String,required:!0},scheduledForDeletion:{type:Boolean,default:!1},createdAt:{type:Date,default:Date.now}}),n=new(s()).Schema({roomId:{type:String,required:!0,unique:!0},messages:[{sender:{type:String,required:!0},message:{type:String,required:!0},timestamp:{type:Date,default:Date.now}}],createdAt:{type:Date,default:Date.now}}),c=s().models.Image||s().model("Image",a),u=s().models.ChatRoom||s().model("ChatRoom",n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[492,661,278],()=>r(55579));module.exports=o})();