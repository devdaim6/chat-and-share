(()=>{var e={};e.id=768,e.ids=[768],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},19361:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(49442),s=r(10042),i=r(48190),n=r.n(i),o=r(63289),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["receive",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,95883)),"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,44486)),"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/receive/page",pathname:"/receive",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40393:(e,t,r)=>{Promise.resolve().then(r.bind(r,95883))},56122:(e,t,r)=>{Promise.resolve().then(r.bind(r,11200))},57298:(e,t,r)=>{Promise.resolve().then(r.bind(r,1806)),Promise.resolve().then(r.bind(r,44973))},70933:(e,t,r)=>{Promise.resolve().then(r.bind(r,73787)),Promise.resolve().then(r.bind(r,70968))},36061:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,46472,23)),Promise.resolve().then(r.t.bind(r,42461,23)),Promise.resolve().then(r.t.bind(r,48190,23)),Promise.resolve().then(r.t.bind(r,15282,23)),Promise.resolve().then(r.t.bind(r,56613,23)),Promise.resolve().then(r.t.bind(r,5486,23)),Promise.resolve().then(r.t.bind(r,3453,23))},18517:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52144,23)),Promise.resolve().then(r.t.bind(r,62302,23)),Promise.resolve().then(r.t.bind(r,63582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,65329,23)),Promise.resolve().then(r.t.bind(r,50599,23)),Promise.resolve().then(r.t.bind(r,62118,23))},11200:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(20149),s=r(63606),i=r(31917),n=r(56598),o=r(52472),l=r(88147);let d=(0,l.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=(0,l.Z)("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),m=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var u=r(70968),h=r(19600),p=r(14971);let f="/api",x=({initialId:e})=>{let[t,r]=(0,s.useState)(e||""),[l,x]=(0,s.useState)(null),[v,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),C=async()=>{x(null),g(""),await P(async()=>{try{let e=await fetch(`${f}/images/${t}`);if(!e.ok)throw Error("Image not found or has expired");let r=await e.json();x(r.imageData),g(r.message),r.message&&u.A.success("Image retrieved successfully")}catch(e){u.A.error(e instanceof Error?e.message:"An error occurred",{icon:(0,a.jsx)(d,{className:"h-5 w-5"})})}},y)};(0,s.useEffect)(()=>{e&&C()},[e,C]);let P=(0,s.useCallback)(async(e,t)=>{let r=Date.now();t(!0);try{await e()}finally{let e=Math.max(0,400-(Date.now()-r));e>0&&await new Promise(t=>setTimeout(t,e)),t(!1)}},[]),A=async()=>{await P(async()=>{try{if(!(await fetch(`${f}/images/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete image");x(null),g(""),u.A.success("Image deleted successfully"),window.location.href="/receive"}catch(e){console.log(e),u.A.error("Failed to delete image")}},w)},_=async()=>{l&&await P(async()=>{try{let e=document.createElement("a");e.href=l,e.download="shared-image.webp",document.body.appendChild(e),e.click(),document.body.removeChild(e),u.A.success("Download started")}catch(e){console.log(e),u.A.error("Failed to download image")}},k)};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)(i.Zb,{className:"transition-all duration-300",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-2xl",children:"Receive Image"}),l&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.z,{onClick:_,variant:"outline",size:"sm",className:"text-green-600 transition-all duration-200",disabled:N,children:N?(0,a.jsx)(h.a,{size:"sm"}):(0,a.jsx)(c,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{onClick:A,variant:"outline",size:"sm",className:"text-red-600 transition-all duration-200",disabled:j,children:j?(0,a.jsx)(h.a,{size:"sm"}):(0,a.jsx)(m,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[!e&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.I,{placeholder:"Enter shared image ID",value:t,onChange:e=>r(e.target.value),className:"flex-grow transition-all duration-200",disabled:b}),(0,a.jsx)(n.z,{onClick:C,disabled:!t||b,className:"transition-all duration-200",children:b?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.a,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Retrieving..."})]}):"Retrieve Image"})]}),(0,a.jsx)("div",{className:"relative min-h-[200px]",children:b?(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity duration-300",children:(0,a.jsx)(h.a,{size:"lg",text:"Loading image...",className:"scale-110"})}):l&&(0,a.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[v&&(0,a.jsxs)("div",{className:"bg-gray-100 p-3 rounded text-gray-700 transition-opacity duration-300",children:[(0,a.jsx)("strong",{children:"Message:"})," ",v]}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-2 transition-all duration-300",children:(0,a.jsx)(p.default,{src:l,alt:"Shared",width:500,height:500,className:"max-h-[500px] mx-auto object-contain transition-all duration-300"})})]})})]})]})})})};var v=r(4619);let g=()=>{let e=(0,v.useSearchParams)().get("id");return(0,a.jsx)(x,{initialId:e})},b=()=>(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(h.a,{}),children:(0,a.jsx)(g,{})})},73787:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var a=r(20149),s=r(85723),i=r(4619),n=r(24219),o=r(83716),l=r(89063),d=r(2958),c=r(26746);function m(){let e=(0,i.usePathname)();return(0,a.jsx)("nav",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center",children:[(0,a.jsx)("div",{className:"mr-8",children:(0,a.jsx)(s.default,{href:"/",className:"flex items-center space-x-2 group",children:(0,a.jsx)("span",{className:"font-mono text-xl font-bold tracking-tight transition-colors duration-200 group-hover:text-primary",children:"ImageShare"})})}),(0,a.jsx)("div",{className:"flex gap-8 relative",children:[{href:"/",label:"Share ",icon:(0,a.jsx)(l.Z,{className:"w-4 h-4"})},{href:"/receive",label:"Receive ",icon:(0,a.jsx)(d.Z,{className:"w-4 h-4"})},{href:"/chat",label:"Chat",icon:(0,a.jsx)(c.Z,{className:"w-4 h-4"})}].map(t=>{let r=e===t.href;return(0,a.jsxs)(s.default,{href:t.href,className:(0,n.cn)("relative py-1 text-sm font-medium transition-all duration-200 hover:text-foreground/80 flex items-center gap-1.5",r?"text-foreground":"text-foreground/60"),children:[t.icon,(0,a.jsx)("span",{children:t.label}),r&&(0,a.jsx)(o.E.div,{layoutId:"navbar-active",className:"absolute -bottom-[21px] left-0 right-0 h-0.5 bg-foreground",animate:{opacity:1,scale:[.8,1]},initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25}})]},t.href)})})]})})}},56598:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var a=r(20149),s=r(63606),i=r(9762),n=r(48917),o=r(24219);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},d)=>{let c=s?i.g7:"button";return(0,a.jsx)(c,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},31917:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,Zb:()=>n,aY:()=>d,ll:()=>l});var a=r(20149),s=r(63606),i=r(24219);let n=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},52472:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(20149),s=r(63606),i=r(24219);let n=s.forwardRef(({className:e,type:t,...r},s)=>(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));n.displayName="Input"},19600:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var a=r(20149);let s=(0,r(88147).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var i=r(24219);let n=({size:e="md",text:t,className:r})=>(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center gap-3",r),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-[3px] border-t-primary border-r-transparent border-b-primary/20 border-l-transparent animate-spin"}),(0,a.jsx)(s,{className:(0,i.cn)("animate-spin text-primary/80",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e])})]}),t&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:t}),(0,a.jsx)("div",{className:"h-1 w-24 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full w-1/2 bg-primary rounded-full animate-[shimmer_1s_ease-in-out_infinite]"})})]})]})},24219:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(96307),s=r(88132);function i(...e){return(0,s.m6)((0,a.W)(e))}},44486:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>c});var a=r(47705),s=r(14463),i=r.n(s),n=r(92774),o=r.n(n);r(67272);var l=r(44973),d=r(1806);let c={title:"ImageShare",description:"Share images with your friends"};function m({children:e}){return(0,a.jsx)("html",{lang:"en",children:(0,a.jsxs)("body",{className:`${i().variable} ${o().variable} antialiased`,children:[(0,a.jsx)(l.Toaster,{position:"top-center"}),(0,a.jsx)(d.default,{}),e]})})}},95883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\CHAt\\\\chat-and-share\\\\app\\\\receive\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx","default")},1806:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\CHAt\\\\chat-and-share\\\\components\\\\Navbar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\components\\Navbar.tsx","default")},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(15394);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[492,363,739,971],()=>r(19361));module.exports=a})();