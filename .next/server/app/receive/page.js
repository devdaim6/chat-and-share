(()=>{var e={};e.id=768,e.ids=[768],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},19361:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=t(49442),r=t(10042),l=t(48190),i=t.n(l),o=t(63289),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(a,n);let d=["",{children:["receive",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,95883)),"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,44486)),"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/receive/page",pathname:"/receive",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40393:(e,a,t)=>{Promise.resolve().then(t.bind(t,95883))},56122:(e,a,t)=>{Promise.resolve().then(t.bind(t,56926))},56926:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var s=t(20149),r=t(63606),l=t(31917),i=t(56598),o=t(52472),n=t(73424),d=t(88147);let c=(0,d.Z)("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),m=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var h=t(2958),u=t(70968),p=t(19600),x=t(14971);let g="/api",v=({initialId:e})=>{let[a,t]=(0,r.useState)(e||""),[d,v]=(0,r.useState)(null),[f,b]=(0,r.useState)(""),[w,y]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1),[N,A]=(0,r.useState)(!1),C=(0,r.useCallback)(async()=>{a&&(v(null),b(""),await P(async()=>{try{let e=await fetch(`${g}/images/${a}`);if(!e.ok)throw Error("Image not found or has expired");let t=await e.json();v(t.imageData),b(t.message),t.message&&u.A.success("Image retrieved successfully")}catch(e){u.A.error(e instanceof Error?e.message:"An error occurred",{icon:(0,s.jsx)(n.Z,{className:"h-5 w-5"})})}},y))},[a]);(0,r.useEffect)(()=>{e&&C()},[e]);let P=(0,r.useCallback)(async(e,a)=>{let t=Date.now();a(!0);try{await e()}finally{let e=Math.max(0,400-(Date.now()-t));e>0&&await new Promise(a=>setTimeout(a,e)),a(!1)}},[]),_=async()=>{await P(async()=>{try{if(!(await fetch(`${g}/images/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete image");v(null),b(""),u.A.success("Image deleted successfully"),window.location.href="/receive"}catch(e){console.log(e),u.A.error("Failed to delete image")}},k)},D=async()=>{d&&await P(async()=>{try{let e=document.createElement("a");e.href=d,e.download="shared-image.webp",document.body.appendChild(e),e.click(),document.body.removeChild(e),u.A.success("Download started")}catch(e){console.log(e),u.A.error("Failed to download image")}},A)};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-0 sm:p-0 md:p-0",children:(0,s.jsx)("div",{className:"h-full  w-full mx-auto",children:(0,s.jsxs)(l.Zb,{className:"transition-all min-h-[80vh]  duration-300 shadow-lg hover:shadow-xl bg-white/80 backdrop-blur-sm h-full",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-col sm:flex-row items-center justify-between border-b pb-4 gap-4",children:[(0,s.jsx)(l.ll,{className:"text-2xl sm:text-3xl font-bold text-black w-full text-center",children:"Recieve Image"}),d&&(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(i.z,{onClick:D,variant:"outline",size:"sm",className:"text-blue-600 hover:bg-blue-50 hover:border-blue-300 border-2 shadow-sm hover:shadow transition-all duration-300 rounded-lg font-medium",disabled:N,children:N?(0,s.jsx)(p.a,{size:"sm",className:"text-blue-600"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"h-4 w-4 mr-2 text-blue-600"}),(0,s.jsx)("span",{children:"Download"})]})}),(0,s.jsx)(i.z,{onClick:_,variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:border-red-300 border-2 shadow-sm hover:shadow transition-all duration-300 rounded-lg font-medium",disabled:j,children:j?(0,s.jsx)(p.a,{size:"sm",className:"text-red-600"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"h-4 w-4 mr-2 text-red-600"}),(0,s.jsx)("span",{children:"Delete"})]})})]})]}),(0,s.jsxs)(l.aY,{className:"space-y-6 pt-4 sm:pt-6",children:[!e&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[(0,s.jsx)(o.I,{placeholder:"Enter shared image ID",value:a,onChange:e=>t(e.target.value),className:"flex-grow transition-all duration-300 border-2 focus:ring-2 focus:ring-gray-200",disabled:w}),(0,s.jsx)(i.z,{onClick:C,disabled:!a||w,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:opacity-90 text-white transition-all duration-300 w-full sm:w-auto",children:w?(0,s.jsx)(p.a,{size:"sm",className:"text-white"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Retrieve Image"]})})]}),(0,s.jsx)("div",{className:"relative",children:w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] transition-opacity duration-300",children:(0,s.jsx)(p.a,{size:"lg",text:"Loading image...",className:"scale-110"})}):d&&(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[f&&(0,s.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg text-black border border-gray-200 transition-all duration-300 text-sm sm:text-base",children:[(0,s.jsx)("strong",{children:"Message:"})," ",f]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-2 sm:p-4 bg-gray-50 hover:border-gray-400 transition-all duration-300 min-h-[60vh]",children:(0,s.jsx)(x.default,{src:d,alt:"Shared",width:1920,height:1080,className:"w-full h-full object-contain rounded-lg shadow-md transition-all duration-300 hover:scale-[1.02]"})})]})})]})]})})})};var f=t(4619);let b=()=>{let e=(0,f.useSearchParams)().get("id");return(0,s.jsx)(v,{initialId:e})},w=()=>(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(p.a,{}),children:(0,s.jsx)(b,{})})},73424:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(88147).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},95883:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\CHAt\\\\chat-and-share\\\\app\\\\receive\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\CHAt\\chat-and-share\\app\\receive\\page.tsx","default")}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[492,285,739,971,524],()=>t(19361));module.exports=s})();