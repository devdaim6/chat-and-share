(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5338:(e,a,r)=>{Promise.resolve().then(r.bind(r,6306))},6306:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>j});var t=r(7437),s=r(2265),l=r(6013),i=r(495),n=r(3102),d=r(7440);let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...s})});c.displayName="Textarea";let o=(0,r(2218).j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),u=s.forwardRef((e,a)=>{let{className:r,variant:s,...l}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:(0,d.cn)(o({variant:s}),r),...l})});u.displayName="Alert",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("h5",{ref:a,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",r),...s})});m.displayName="AlertDescription";var f=r(8030);let g=(0,f.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),x=(0,f.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),p=(0,f.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var h=r(8184),v=r(6884);let b=(0,f.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var y=r(6648);function j(){let[e,a]=(0,s.useState)(null),[r,d]=(0,s.useState)(""),[o,f]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[w,k]=(0,s.useState)(""),[C,R]=(0,s.useState)(""),[I,z]=(0,s.useState)(!1),Z=(0,s.useRef)(null),O=(0,s.useRef)(null),S=async()=>{z(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:!0});Z.current&&(Z.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e),alert("Could not access camera. Please check permissions.")}},_=async()=>{if(!e)return;let a=new FormData;a.append("image",e),a.append("message",r);try{f("uploading");let e=await fetch("".concat("/api","/upload"),{method:"POST",body:a}),r=await e.json();N("".concat(r.imageId)),k(r.imageId),f("success")}catch(e){f("error"),console.error("Upload failed:",e)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)(l.ll,{className:"text-2xl",children:"ImageShare"})}),(0,t.jsxs)(l.aY,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:I?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("video",{ref:Z,autoPlay:!0,className:"w-full h-64 object-cover rounded"}),(0,t.jsx)("canvas",{ref:O,width:"640",height:"480",className:"hidden"}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center space-x-4",children:[(0,t.jsxs)(i.z,{onClick:()=>{if(Z.current&&O.current){let e=O.current.getContext("2d");e&&(e.drawImage(Z.current,0,0,640,480),O.current.toBlob(e=>{if(!e)return;let r=new File([e],"captured-image.jpg",{type:"image/jpeg"});a(r),R(URL.createObjectURL(r)),z(!1)},"image/jpeg"))}},className:"bg-green-500",children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4"})," Capture"]}),(0,t.jsxs)(i.z,{onClick:()=>{Z.current&&Z.current.srcObject instanceof MediaStream&&Z.current.srcObject.getTracks().forEach(e=>e.stop()),z(!1)},variant:"destructive",children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"})," Cancel"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t&&t.type.startsWith("image/")){a(t);let e=new FileReader;e.onload=()=>R(e.result),e.readAsDataURL(t)}},className:"hidden",id:"fileInput"}),(0,t.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer",children:C?(0,t.jsx)(y.default,{src:C,alt:"Preview",className:"max-h-64 mx-auto object-cover rounded",width:640,height:480}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p,{className:"w-12 h-12 mx-auto text-gray-400"}),(0,t.jsx)("p",{children:"Click to select an image"})]})})]})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(i.z,{onClick:S,variant:"outline",className:"flex-1",children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4"})," Open Camera"]}),(0,t.jsxs)(i.z,{onClick:()=>{let e=document.getElementById("fileInput");e&&e.click()},variant:"outline",className:"flex-1",children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Upload Image"]})]}),(0,t.jsx)(c,{placeholder:"Add a message to your image (optional)",value:r,onChange:e=>{d(e.target.value)},className:"w-full",maxLength:500}),(0,t.jsxs)(i.z,{onClick:_,disabled:!e||"uploading"===o,className:"w-full",children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"uploading"===o?"Uploading...":"Share Image"]}),"success"===o&&(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.I,{value:j,readOnly:!0,className:"font-mono text-sm"}),(0,t.jsx)(i.z,{onClick:()=>{navigator.clipboard.writeText(j)},variant:"outline",title:"Copy to clipboard",children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{onClick:()=>window.open("/receive?id=".concat(w),"_blank"),variant:"outline",title:"Open receive page",children:(0,t.jsx)(b,{className:"h-4 w-4"})})]})}),"error"===o&&(0,t.jsx)(u,{variant:"destructive",children:(0,t.jsx)(m,{children:"Failed to upload image. Please try again."})})]})]})})})})}},495:(e,a,r)=>{"use strict";r.d(a,{z:()=>c});var t=r(7437),s=r(2265),l=r(2974),i=r(2218),n=r(7440);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,a)=>{let{className:r,variant:s,size:i,asChild:c=!1,...o}=e,u=c?l.g7:"button";return(0,t.jsx)(u,{className:(0,n.cn)(d({variant:s,size:i,className:r})),ref:a,...o})});c.displayName="Button"},6013:(e,a,r)=>{"use strict";r.d(a,{Ol:()=>n,Zb:()=>i,aY:()=>c,ll:()=>d});var t=r(7437),s=r(2265),l=r(7440);let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3102:(e,a,r)=>{"use strict";r.d(a,{I:()=>i});var t=r(7437),s=r(2265),l=r(7440);let i=s.forwardRef((e,a)=>{let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...i})});i.displayName="Input"},7440:(e,a,r)=>{"use strict";r.d(a,{cn:()=>l});var t=r(4839),s=r(6164);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.m6)((0,t.W)(a))}},6884:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(8030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8184:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[502,552,130,215,744],()=>a(5338)),_N_E=e.O()}]);