(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{3734:(e,a,r)=>{Promise.resolve().then(r.bind(r,8067))},8067:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var s=r(7437),t=r(2265),l=r(6013),n=r(495),d=r(3102),i=r(6127),o=r(8030);let c=(0,o.Z)("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),m=(0,o.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var u=r(7164),h=r(7776),f=r(816),x=r(6648);let g="/api",p=e=>{let{initialId:a}=e,[r,o]=(0,t.useState)(a||""),[p,b]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[w,j]=(0,t.useState)(!1),[N,k]=(0,t.useState)(!1),[C,z]=(0,t.useState)(!1),E=(0,t.useCallback)(async()=>{r&&(b(null),y(""),await _(async()=>{try{let e=await fetch("".concat(g,"/images/").concat(r));if(!e.ok)throw Error("Image not found or has expired");let a=await e.json();b(a.imageData),y(a.message),a.message&&h.A.success("Image retrieved successfully")}catch(e){h.A.error(e instanceof Error?e.message:"An error occurred",{icon:(0,s.jsx)(i.Z,{className:"h-5 w-5"})})}},j))},[r]);(0,t.useEffect)(()=>{a&&E()},[a]);let _=(0,t.useCallback)(async(e,a)=>{let r=Date.now();a(!0);try{await e()}finally{let e=Math.max(0,400-(Date.now()-r));e>0&&await new Promise(a=>setTimeout(a,e)),a(!1)}},[]),A=async()=>{await _(async()=>{try{if(!(await fetch("".concat(g,"/images/").concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete image");b(null),y(""),h.A.success("Image deleted successfully"),window.location.href="/receive"}catch(e){console.log(e),h.A.error("Failed to delete image")}},k)},D=async()=>{p&&await _(async()=>{try{let e=document.createElement("a");e.href=p,e.download="shared-image.webp",document.body.appendChild(e),e.click(),document.body.removeChild(e),h.A.success("Download started")}catch(e){console.log(e),h.A.error("Failed to download image")}},z)};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-0 sm:p-0 md:p-0",children:(0,s.jsx)("div",{className:"h-full  w-full mx-auto",children:(0,s.jsxs)(l.Zb,{className:"transition-all min-h-[80vh]  duration-300 shadow-lg hover:shadow-xl bg-white/80 backdrop-blur-sm h-full",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-col sm:flex-row items-center justify-between border-b pb-4 gap-4",children:[(0,s.jsx)(l.ll,{className:"text-2xl sm:text-3xl font-bold text-black w-full text-center",children:"Recieve Image"}),p&&(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.z,{onClick:D,variant:"outline",size:"sm",className:"text-blue-600 hover:bg-blue-50 hover:border-blue-300 border-2 shadow-sm hover:shadow transition-all duration-300 rounded-lg font-medium",disabled:C,children:C?(0,s.jsx)(f.a,{size:"sm",className:"text-blue-600"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"h-4 w-4 mr-2 text-blue-600"}),(0,s.jsx)("span",{children:"Download"})]})}),(0,s.jsx)(n.z,{onClick:A,variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:border-red-300 border-2 shadow-sm hover:shadow transition-all duration-300 rounded-lg font-medium",disabled:N,children:N?(0,s.jsx)(f.a,{size:"sm",className:"text-red-600"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"h-4 w-4 mr-2 text-red-600"}),(0,s.jsx)("span",{children:"Delete"})]})})]})]}),(0,s.jsxs)(l.aY,{className:"space-y-6 pt-4 sm:pt-6",children:[!a&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[(0,s.jsx)(d.I,{placeholder:"Enter shared image ID",value:r,onChange:e=>o(e.target.value),className:"flex-grow transition-all duration-300 border-2 focus:ring-2 focus:ring-gray-200",disabled:w}),(0,s.jsx)(n.z,{onClick:E,disabled:!r||w,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:opacity-90 text-white transition-all duration-300 w-full sm:w-auto",children:w?(0,s.jsx)(f.a,{size:"sm",className:"text-white"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"mr-2 h-4 w-4"})," Retrieve Image"]})})]}),(0,s.jsx)("div",{className:"relative",children:w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] transition-opacity duration-300",children:(0,s.jsx)(f.a,{size:"lg",text:"Loading image...",className:"scale-110"})}):p&&(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[v&&(0,s.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg text-black border border-gray-200 transition-all duration-300 text-sm sm:text-base",children:[(0,s.jsx)("strong",{children:"Message:"})," ",v]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-2 sm:p-4 bg-gray-50 hover:border-gray-400 transition-all duration-300 min-h-[60vh]",children:(0,s.jsx)(x.default,{src:p,alt:"Shared",width:1920,height:1080,className:"w-full h-full object-contain rounded-lg shadow-md transition-all duration-300 hover:scale-[1.02]"})})]})})]})]})})})};var b=r(6463);let v=()=>{let e=(0,b.useSearchParams)().get("id");return(0,s.jsx)(p,{initialId:e})},y=()=>(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)(f.a,{}),children:(0,s.jsx)(v,{})})},495:(e,a,r)=>{"use strict";r.d(a,{z:()=>o});var s=r(7437),t=r(2265),l=r(2974),n=r(2218),d=r(7440);let i=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,a)=>{let{className:r,variant:t,size:n,asChild:o=!1,...c}=e,m=o?l.g7:"button";return(0,s.jsx)(m,{className:(0,d.cn)(i({variant:t,size:n,className:r})),ref:a,...c})});o.displayName="Button"},6013:(e,a,r)=>{"use strict";r.d(a,{Ol:()=>d,Zb:()=>n,aY:()=>o,ll:()=>i});var s=r(7437),t=r(2265),l=r(7440);let n=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...t})});n.displayName="Card";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...t})});d.displayName="CardHeader";let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("h3",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...t})});i.displayName="CardTitle",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",r),...t})}).displayName="CardDescription";let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},3102:(e,a,r)=>{"use strict";r.d(a,{I:()=>n});var s=r(7437),t=r(2265),l=r(7440);let n=t.forwardRef((e,a)=>{let{className:r,type:t,...n}=e;return(0,s.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...n})});n.displayName="Input"},816:(e,a,r)=>{"use strict";r.d(a,{a:()=>n});var s=r(7437);let t=(0,r(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var l=r(7440);let n=e=>{let{size:a="md",text:r,className:n}=e;return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center gap-3",n),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-[3px] border-t-primary border-r-transparent border-b-primary/20 border-l-transparent animate-spin"}),(0,s.jsx)(t,{className:(0,l.cn)("animate-spin text-primary/80",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[a])})]}),r&&(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:r}),(0,s.jsx)("div",{className:"h-1 w-24 bg-muted rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full w-1/2 bg-primary rounded-full animate-[shimmer_1s_ease-in-out_infinite]"})})]})]})}},7440:(e,a,r)=>{"use strict";r.d(a,{cn:()=>l});var s=r(4839),t=r(6164);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,t.m6)((0,s.W)(a))}},7164:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(8030).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6127:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(8030).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[502,776,859,130,215,744],()=>a(3734)),_N_E=e.O()}]);