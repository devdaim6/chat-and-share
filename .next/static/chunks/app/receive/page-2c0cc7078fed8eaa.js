(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{3734:(e,a,s)=>{Promise.resolve().then(s.bind(s,823))},823:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var r=s(7437),t=s(2265),i=s(6013),l=s(495),n=s(3102),d=s(8030);let o=(0,d.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=(0,d.Z)("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),m=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var u=s(7776),f=s(816),x=s(6648);let h="/api",p=e=>{let{initialId:a}=e,[s,d]=(0,t.useState)(a||""),[p,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[b,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),z=async()=>{g(null),y(""),await E(async()=>{try{let e=await fetch("".concat(h,"/images/").concat(s));if(!e.ok)throw Error("Image not found or has expired");let a=await e.json();g(a.imageData),y(a.message),a.message&&u.A.success("Image retrieved successfully")}catch(e){u.A.error(e instanceof Error?e.message:"An error occurred",{icon:(0,r.jsx)(o,{className:"h-5 w-5"})})}},j)};(0,t.useEffect)(()=>{a&&z()},[a,z]);let E=(0,t.useCallback)(async(e,a)=>{let s=Date.now();a(!0);try{await e()}finally{let e=Math.max(0,400-(Date.now()-s));e>0&&await new Promise(a=>setTimeout(a,e)),a(!1)}},[]),_=async()=>{await E(async()=>{try{if(!(await fetch("".concat(h,"/images/").concat(s),{method:"DELETE"})).ok)throw Error("Failed to delete image");g(null),y(""),u.A.success("Image deleted successfully"),window.location.href="/receive"}catch(e){console.log(e),u.A.error("Failed to delete image")}},N)},A=async()=>{p&&await E(async()=>{try{let e=document.createElement("a");e.href=p,e.download="shared-image.webp",document.body.appendChild(e),e.click(),document.body.removeChild(e),u.A.success("Download started")}catch(e){console.log(e),u.A.error("Failed to download image")}},C)};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)(i.Zb,{className:"transition-all duration-300",children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(i.ll,{className:"text-2xl",children:"Receive Image"}),p&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(l.z,{onClick:A,variant:"outline",size:"sm",className:"text-green-600 transition-all duration-200",disabled:k,children:k?(0,r.jsx)(f.a,{size:"sm"}):(0,r.jsx)(c,{className:"h-4 w-4"})}),(0,r.jsx)(l.z,{onClick:_,variant:"outline",size:"sm",className:"text-red-600 transition-all duration-200",disabled:w,children:w?(0,r.jsx)(f.a,{size:"sm"}):(0,r.jsx)(m,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)(i.aY,{className:"space-y-4",children:[!a&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n.I,{placeholder:"Enter shared image ID",value:s,onChange:e=>d(e.target.value),className:"flex-grow transition-all duration-200",disabled:b}),(0,r.jsx)(l.z,{onClick:z,disabled:!s||b,className:"transition-all duration-200",children:b?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(f.a,{size:"sm"}),(0,r.jsx)("span",{className:"ml-2",children:"Retrieving..."})]}):"Retrieve Image"})]}),(0,r.jsx)("div",{className:"relative min-h-[200px]",children:b?(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity duration-300",children:(0,r.jsx)(f.a,{size:"lg",text:"Loading image...",className:"scale-110"})}):p&&(0,r.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[v&&(0,r.jsxs)("div",{className:"bg-gray-100 p-3 rounded text-gray-700 transition-opacity duration-300",children:[(0,r.jsx)("strong",{children:"Message:"})," ",v]}),(0,r.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-2 transition-all duration-300",children:(0,r.jsx)(x.default,{src:p,alt:"Shared",width:500,height:500,className:"max-h-[500px] mx-auto object-contain transition-all duration-300"})})]})})]})]})})})};var g=s(6463);let v=()=>{let e=(0,g.useSearchParams)().get("id");return(0,r.jsx)(p,{initialId:e})},y=()=>(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)(f.a,{}),children:(0,r.jsx)(v,{})})},495:(e,a,s)=>{"use strict";s.d(a,{z:()=>o});var r=s(7437),t=s(2265),i=s(2974),l=s(2218),n=s(7440);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,a)=>{let{className:s,variant:t,size:l,asChild:o=!1,...c}=e,m=o?i.g7:"button";return(0,r.jsx)(m,{className:(0,n.cn)(d({variant:t,size:l,className:s})),ref:a,...c})});o.displayName="Button"},6013:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>n,Zb:()=>l,aY:()=>o,ll:()=>d});var r=s(7437),t=s(2265),i=s(7440);let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...t})});l.displayName="Card";let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h3",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",s),...t})});d.displayName="CardTitle",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...t})}).displayName="CardDescription";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",s),...t})});o.displayName="CardContent",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",s),...t})}).displayName="CardFooter"},3102:(e,a,s)=>{"use strict";s.d(a,{I:()=>l});var r=s(7437),t=s(2265),i=s(7440);let l=t.forwardRef((e,a)=>{let{className:s,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...l})});l.displayName="Input"},816:(e,a,s)=>{"use strict";s.d(a,{a:()=>l});var r=s(7437);let t=(0,s(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var i=s(7440);let l=e=>{let{size:a="md",text:s,className:l}=e;return(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center gap-3",l),children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full border-[3px] border-t-primary border-r-transparent border-b-primary/20 border-l-transparent animate-spin"}),(0,r.jsx)(t,{className:(0,i.cn)("animate-spin text-primary/80",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[a])})]}),s&&(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:s}),(0,r.jsx)("div",{className:"h-1 w-24 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full w-1/2 bg-primary rounded-full animate-[shimmer_1s_ease-in-out_infinite]"})})]})]})}},7440:(e,a,s)=>{"use strict";s.d(a,{cn:()=>i});var r=s(4839),t=s(6164);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.m6)((0,r.W)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[502,552,592,130,215,744],()=>a(3734)),_N_E=e.O()}]);