(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5338:(e,r,t)=>{Promise.resolve().then(t.bind(t,8088))},8088:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var a=t(7437),s=t(2265),l=t(6013),i=t(495),n=t(3102),o=t(7440);let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s})});d.displayName="Textarea";let c=(0,t(2218).j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),u=s.forwardRef((e,r)=>{let{className:t,variant:s,...l}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,o.cn)(c({variant:s}),t),...l})});u.displayName="Alert",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h5",{ref:r,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})}).displayName="AlertTitle";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",t),...s})});m.displayName="AlertDescription";var h=t(8030);let p=(0,h.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),g=(0,h.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=(0,h.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var f=t(8184);let v=(0,h.Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var b=t(6884);let y=(0,h.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var w=t(6648),j=t(6463);function N(){let[e,r]=(0,s.useState)(null),[t,o]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[C,R]=(0,s.useState)(""),[I,M]=(0,s.useState)(""),[O,z]=(0,s.useState)(!1),[S,Z]=(0,s.useState)(""),E=(0,s.useRef)(null),L=(0,s.useRef)(null),_=(0,j.useRouter)(),D=async()=>{z(!0),Z("");try{var e;if(!(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia))throw Error("Camera access is not supported in this browser");let r=await navigator.mediaDevices.getUserMedia({video:!0}),t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);if(t.length>1){let e=t.find(e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment"));if(e){r.getTracks().forEach(e=>e.stop());let t=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:e.deviceId},width:{ideal:1920},height:{ideal:1080}}});E.current&&(E.current.srcObject=t,await E.current.play())}else E.current&&(E.current.srcObject=r,await E.current.play())}else E.current&&(E.current.srcObject=r,await E.current.play())}catch(e){console.error("Error accessing camera:",e),Z(e instanceof Error?e.message:"Could not access camera. Please check permissions."),console.log(S),z(!1)}},F=async()=>{if(!e)return;let r=new FormData;r.append("image",e),r.append("message",t);try{h("uploading");let e=await fetch("".concat("/api","/upload"),{method:"POST",body:r}),t=await e.json();k("".concat(t.imageId)),R(t.imageId),h("success")}catch(e){h("error"),console.error("Upload failed:",e)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"min-h-[90vh] bg-gradient-to-br from-gray-50 to-gray-100 p-0 sm:p-0 md:p-0",children:(0,a.jsx)("div",{className:"max-w-screen mx-auto",children:(0,a.jsxs)(l.Zb,{className:"transition-all duration-300 shadow-lg hover:shadow-xl bg-white/80 backdrop-blur-sm",children:[(0,a.jsx)(l.Ol,{className:"flex flex-col sm:flex-row items-center justify-between border-b pb-4 gap-4",children:(0,a.jsx)(l.ll,{className:"text-2xl sm:text-3xl font-bold text-black w-full text-center",children:"Image Share"})}),(0,a.jsxs)(l.aY,{className:"space-y-4 sm:space-y-6 pt-4 sm:pt-6",children:[(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-3 sm:p-4 text-center hover:border-gray-400 transition-all duration-300 bg-gray-50",children:O?(0,a.jsxs)("div",{className:"relative min-h-[250px] sm:min-h-[350px] max-h-[400px]",children:[(0,a.jsx)("video",{ref:E,autoPlay:!0,className:"w-full h-full object-cover rounded-lg shadow-md"}),(0,a.jsx)("canvas",{ref:L,width:"640",height:"480",className:"hidden"}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:[(0,a.jsxs)(i.z,{onClick:()=>{if(E.current&&L.current){let e=L.current.getContext("2d");if(!e)return;let{videoWidth:t,videoHeight:a}=E.current;L.current.width=t,L.current.height=a,E.current.style.transform.includes("scaleX(-1)")&&(e.scale(-1,1),e.translate(-t,0)),e.drawImage(E.current,0,0,t,a),L.current.toBlob(e=>{var t;if(!e)return;let a=new File([e],"captured-image.jpg",{type:"image/jpeg"});r(a),M(URL.createObjectURL(a)),z(!1),(null===(t=E.current)||void 0===t?void 0:t.srcObject)instanceof MediaStream&&E.current.srcObject.getTracks().forEach(e=>e.stop())},"image/jpeg",.8)}},className:"bg-green-500 hover:bg-green-600 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)(p,{className:"mr-2 h-4 w-4"})," Capture"]}),(0,a.jsxs)(i.z,{onClick:()=>{E.current&&E.current.srcObject instanceof MediaStream&&E.current.srcObject.getTracks().forEach(e=>e.stop()),z(!1),Z("")},variant:"destructive",className:"shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)(g,{className:"mr-2 h-4 w-4"})," Cancel"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a&&a.type.startsWith("image/")){r(a);let e=new FileReader;e.onload=()=>M(e.result),e.readAsDataURL(a)}},className:"hidden",id:"fileInput"}),(0,a.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer block min-h-[250px] sm:min-h-[350px] max-h-[400px] flex items-center justify-center",children:I?(0,a.jsx)(w.default,{src:I,alt:"Preview",className:"max-h-[250px] sm:max-h-[350px] w-auto object-contain rounded-lg shadow-md transition-transform duration-300 hover:scale-[1.02]",width:1280,height:720}):(0,a.jsxs)("div",{className:"space-y-3 text-gray-500",children:[(0,a.jsx)(x,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-400"}),(0,a.jsx)("p",{className:"text-base sm:text-lg",children:"Click to select an image"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-400",children:"Supports JPG, PNG, WebP"})]})})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,a.jsxs)(i.z,{onClick:D,variant:"outline",className:"flex-1 py-4 sm:py-6 border-2 hover:border-blue-300 hover:bg-blue-50 transition-all duration-300",children:[(0,a.jsx)(p,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"})," Open Camera"]}),(0,a.jsxs)(i.z,{onClick:()=>{let e=document.getElementById("fileInput");e&&e.click()},variant:"outline",className:"flex-1 py-4 sm:py-6 border-2 hover:border-purple-300 hover:bg-purple-50 transition-all duration-300",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"})," Upload Image"]})]}),(0,a.jsx)(d,{placeholder:"Add a message to your image (optional)",value:t,onChange:e=>{o(e.target.value)},className:"w-full min-h-[40px]  border-2 focus:ring-2 focus:ring-gray-200 transition-all duration-300",maxLength:500}),(0,a.jsx)(i.z,{onClick:F,disabled:!e||"uploading"===c,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:opacity-90 text-white transition-all duration-300 w-full py-4 sm:py-6 text-base sm:text-lg font-semibold shadow-lg hover:shadow-xl",children:"uploading"===c?(0,a.jsx)(v,{size:"sm",className:"text-white"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"})," Share Image"]})}),"success"===c&&(0,a.jsxs)("div",{className:"space-y-2 sm:space-y-3 bg-gray-50 p-3 sm:p-4 rounded-lg border-2",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Share your image with this link:"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.I,{value:N,readOnly:!0,className:"font-mono text-xs sm:text-sm bg-white flex-1"}),(0,a.jsx)(i.z,{onClick:()=>{navigator.clipboard.writeText(N)},variant:"outline",title:"Copy to clipboard",className:"hover:bg-blue-50 hover:border-blue-300 transition-all duration-300",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{onClick:()=>_.push("/receive?id=".concat(C)),variant:"outline",title:"Open receive page",className:"hover:bg-purple-50 hover:border-purple-300 transition-all duration-300",children:(0,a.jsx)(y,{className:"h-4 w-4"})})]})]}),"error"===c&&(0,a.jsx)(u,{variant:"destructive",className:"bg-red-50 border-2 border-red-200",children:(0,a.jsx)(m,{className:"text-sm font-medium",children:"Failed to upload image. Please try again."})})]})]})})})})}},495:(e,r,t)=>{"use strict";t.d(r,{z:()=>d});var a=t(7437),s=t(2265),l=t(2974),i=t(2218),n=t(7440);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,n.cn)(o({variant:s,size:i,className:t})),ref:r,...c})});d.displayName="Button"},6013:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>n,Zb:()=>i,aY:()=>d,ll:()=>o});var a=t(7437),s=t(2265),l=t(7440);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});i.displayName="Card";let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},3102:(e,r,t)=>{"use strict";t.d(r,{I:()=>i});var a=t(7437),s=t(2265),l=t(7440);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},7440:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var a=t(4839),s=t(6164);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}},6884:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(8030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8184:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[502,859,130,215,744],()=>r(5338)),_N_E=e.O()}]);